<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Favorites â€” Aslama Alteeba</title>
  <script>
    document.documentElement.classList.add("js-page-transition");
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/styles/timeline.css">
  <link rel="stylesheet" href="/styles/smoothness.css">
  <link rel="stylesheet" href="/styles/favorites.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <script src="/customerMemory.js"></script>
  <script src="/favorites.js"></script>
  <script defer src="/transition.js"></script>
  <style>
    html,body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu}
    .glass{backdrop-filter: blur(12px); background: rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.1)}
    [x-cloak]{display:none !important}
  </style>
</head>
<body class="bg-neutral-950 text-neutral-100" x-data="favoritesPageState()" x-init="init()">
  <div id="page-transition" class="page-transition is-active" aria-hidden="true"></div>
  <header class="sticky top-0 z-50 glass">
    <div class="max-w-6xl mx-auto flex items-center px-4 py-3 gap-6">
      <a href="/" class="text-xl font-extrabold tracking-tight whitespace-nowrap">Aslama <span class="text-emerald-400">Alteeba</span></a>
      <nav class="hidden md:flex gap-6 text-sm">
        <a href="/#shop" class="hover:text-white">Browse</a>
        <a href="/#contact" class="hover:text-white">Contact</a>
      </nav>
      <div class="flex items-center gap-2 ml-auto">
        <a href="/fa/" class="px-3 py-2 rounded-xl bg-white/10 border border-white/10 hover:bg-white/15">ðŸ‡®ðŸ‡· Persian</a>
        <a href="/ar/" class="px-3 py-2 rounded-xl bg-white/10 border border-white/10 hover:bg-white/15">ðŸ‡¦ðŸ‡ª Arabic</a>
        <a href="/favorites.html" class="favorite-nav-link w-10 h-10 rounded-full bg-white/10 border border-white/10 flex items-center justify-center" aria-label="View favorites">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
            <path d="M12 21s-7-4.35-9.33-8.4C.9 9.05 2.28 5.5 5.72 4.65A5.35 5.35 0 0 1 12 7.08a5.35 5.35 0 0 1 6.28-2.43c3.44.85 4.82 4.4 3.05 7.95C19 16.65 12 21 12 21z"/>
          </svg>
          <span class="favorite-badge" x-show="favoriteCount" x-text="favoriteCount"></span>
        </a>
        <a href="tel:+971554637045" class="px-3 py-2 rounded-xl bg-emerald-500 text-black font-semibold hover:opacity-90">+971 55 463 7045</a>
      </div>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 py-12">
    <div class="flex flex-col gap-3 md:flex-row md:items-end md:justify-between">
      <div>
        <h1 class="text-3xl font-extrabold">Your Favorites</h1>
        <p class="text-neutral-400">Keep track of the tires you want to review or share.</p>
      </div>
      <span class="text-sm text-neutral-400" x-text="favoriteCount ? `${favoriteCount} saved` : ''"></span>
    </div>

    <template x-if="favorites.length === 0">
      <div class="mt-12 glass rounded-3xl p-10 text-center border-white/10">
        <h2 class="text-2xl font-bold mb-2">No favorites yet</h2>
        <p class="text-neutral-400 mb-6">Tap the heart on any product to save it here.</p>
        <a href="/#shop" class="inline-flex items-center px-6 py-3 rounded-2xl bg-emerald-400 text-black font-bold hover:opacity-90">Browse store</a>
      </div>
    </template>

    <template x-if="favorites.length">
      <div class="mt-10 grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
        <template x-for="item in favorites" :key="item.id">
          <article class="glass rounded-3xl overflow-hidden border-white/10">
            <div class="relative">
              <img :src="item.img" :alt="item.name" class="w-full h-48 object-contain bg-black/30" />
              <button
                class="favorite-toggle absolute top-3"
                style="inset-inline-end: 0.75rem;"
                :class="{ 'is-active': isFavorite(item.id), 'is-animating': favoriteAnimations[item.id] }"
                :aria-pressed="isFavorite(item.id)"
                title="Toggle favorite"
                @click.stop="toggleFavorite(item)"
              >
                <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M12 21s-7-4.35-9.33-8.4C.9 9.05 2.28 5.5 5.72 4.65A5.35 5.35 0 0 1 12 7.08a5.35 5.35 0 0 1 6.28-2.43c3.44.85 4.82 4.4 3.05 7.95C19 16.65 12 21 12 21z"/>
                </svg>
              </button>
            </div>
            <div class="p-4 space-y-2">
              <div class="flex items-center justify-between gap-2">
                <h3 class="font-bold" x-text="item.name"></h3>
                <span class="text-xs px-2 py-1 rounded-full bg-white/10" x-text="item.brand"></span>
              </div>
              <p class="text-sm text-neutral-300" x-text="item.desc"></p>
              <div class="text-xs text-neutral-400" x-text="item.size"></div>
            </div>
          </article>
        </template>
      </div>
    </template>
  </main>

  <div
    class="fixed top-20 z-50 space-y-2"
    style="inset-inline-end: 1rem;"
    x-show="toasts.length"
    x-cloak
  >
    <template x-for="toast in toasts" :key="toast.id">
      <div class="favorite-toast" x-text="toast.message"></div>
    </template>
  </div>

  <script>
    function favoritesPageState() {
      const controller = window.FavoritesUI
        ? FavoritesUI.createController()
        : {
            favorites: [],
            favoriteIdSet: new Set(),
            favoriteCount: 0,
            favoriteAnimations: {},
            toasts: [],
            prefersReducedMotion: false,
            initFavorites() {},
            isFavorite() { return false; },
            toggleFavorite() { return { added: false }; },
            addToast() {}
          };

      return {
        ...controller,
        init() {
          this.initFavorites();
        }
      };
    }
  </script>
</body>
</html>
